git status --short

echo -n "Do you want to commit all changes? (y/n): "
read answer
if [ "$answer" != "${answer#[Yy]}" ] ;then
    echo "Committing all changes..."
else
    echo "Aborting..."
    exit 1
fi

git add --all
git commit -m "Attempt $(($(git rev-list --all --count) + 1))"
git push